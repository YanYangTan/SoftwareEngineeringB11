{"remainingRequest":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\src\\components\\GenealogyPage.vue?vue&type=style&index=0&id=e29c9c60&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\src\\components\\GenealogyPage.vue","mtime":1640093513438},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\css-loader\\dist\\cjs.js","mtime":1640092995101},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1640093009873},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":1640093004237},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640092990984},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1640093009872}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2FwcCB7CiAgZm9udC1mYW1pbHk6IEF2ZW5pciwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDsKICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlOwogIGNvbG9yOiAjMmMzZTUwOwogIG1hcmdpbi10b3A6IDMwcHg7Cn0KLnRleHQtY2VudGVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbWFyZ2luLWJvdHRvbTogMTZweDsKfQouY3VzdG9tLWNhcmQgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICB3aWR0aDogMTEwcHg7CiAgcGFkZGluZzogNXB4OwogIGJvcmRlcjogMC41cHggc29saWQgI2RkZDsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGN1cnNvcjogcG9pbnRlcjsKICBib3gtc2hhZG93OiAwIDAgM3B4IDFweCByZ2JhKCMwMDAsIDApOwogIHRyYW5zaXRpb246IGJveC1zaGFkb3cgLjJzIGVhc2U7CiAgJjpob3ZlciB7CiAgICBib3gtc2hhZG93OiAwIDAgM3B4IDFweCByZ2JhKCMwMDAsIC4xKTsKICB9CiAgJl9faW1hZ2UgewogICAgZmxleDogMCAwIGF1dG87CiAgICB3aWR0aDogMzBweDsKICAgIGhlaWdodDogMzBweDsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgIGJhY2tncm91bmQtY29sb3I6ICNkZWRlZGU7CiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogNTAlOwogIH0KICAmX19pbmZvIHsKICAgIHBhZGRpbmctbGVmdDogOHB4OwogIH0KICAmX19uYW1lIHsKICAgIGZvbnQtd2VpZ2h0OiAzMDA7CiAgfQogICZfX2FnZSB7CiAgICBtYXJnaW4tdG9wOiAycHg7CiAgICBmb250LXNpemU6IDZweDsKICB9Cn0K"},{"version":3,"sources":["GenealogyPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GenealogyPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"app\">\n    <el-card>\n<!--    <div class=\"text-center\">-->\n<!--&lt;!&ndash;      <h1 class=\"title\">家谱</h1>&ndash;&gt;-->\n<!--    </div>-->\n    <VueFamilyTree\n      :tree=\"tree\"\n      @card-click=\"cardClick\"\n    >\n      <template\n        v-if=\"customCard\"\n        v-slot:card=\"{item}\"\n      >\n        <el-popover\n  placement=\"right\"\n  width=\"100\"\n  trigger=\"click\">\n  <el-menu :default-openeds=\"['2']\">\n    <el-menu-item index=\"2-1\" @click=\"cardClick(item)\">查看信息</el-menu-item>\n    <el-popover\n  placement=\"right\"\n  width=\"100\"\n  trigger=\"click\">\n      <el-menu :default-openeds=\"['3']\">\n        <el-menu-item index=\"3-1\" @click=\"addMember(item,'Sibling')\">兄弟</el-menu-item>\n        <el-menu-item index=\"2-2\" @click=\"addMember(item,'Children')\">儿女</el-menu-item>\n        <el-menu-item index=\"2-2\" @click=\"addMember(item,'Honey')\">配偶</el-menu-item>\n      </el-menu>\n    <el-menu-item slot=\"reference\" index=\"2-2\" @click=\"cardClick(item)\">添加成员</el-menu-item>\n    </el-popover>\n  </el-menu>\n        <el-button slot=\"reference\" class=\"custom-card\"  @click=\"cardClick(item)\">\n          <div\n            :style=\"{backgroundImage: item.image ? `url(${item.image})` :  null}\"\n            class=\"custom-card__image\"\n          />\n          <div class=\"custom-card__info\">\n            <div class=\"custom-card__name\">\n              {{ item.name }}\n            </div>\n            <div\n              v-show=\"item.age\"\n              class=\"custom-card__age\"\n            >\n              Age: {{ item.age }}\n            </div>\n          </div>\n        </el-button>\n        </el-popover>\n      </template>\n    </VueFamilyTree>\n      </el-card>\n  </div>\n</template>\n\n<script>\nimport VueFamilyTree from 'vue-family-tree';\nimport axios from 'axios';\n\nexport default {\n  name: 'App',\n  components: {\n    VueFamilyTree,\n  },\n  props: {\n    // eslint-disable-next-line vue/require-prop-type-constructor\n    info: {},\n  },\n  data() {\n    return {\n      customCard: true,\n      userlist: [],\n      temptree: [],\n      currentchildren: [],\n      currentnode: {},\n      testnum: 100,\n      tree: [{\n        firstPerson: {\n          name: 'John Walker',\n          image: 'https://picsum.photos/300/300?random=1',\n          id: 1,\n        },\n        secondPerson: {\n          name: 'Jannet Grem',\n          image: 'https://picsum.photos/300/300?random=2',\n          age: 23,\n          id: 2,\n        },\n        children: [{\n          firstPerson: {\n            name: 'Katia',\n            id: 3,\n          },\n          secondPerson: {\n            name: 'Oleg',\n            id: 4,\n          },\n          children: [{\n            firstPerson: {\n              name: 'Gleb',\n              id: 5,\n            },\n            secondPerson: {\n              name: 'Viktoriya',\n              id: 6,\n            },\n            children: [{\n              firstPerson: {\n                name: 'Rim',\n              },\n              secondPerson: {\n                name: 'Natasha',\n              },\n            },\n            {\n              firstPerson: {\n                name: 'Leonid',\n              },\n            }, {\n              firstPerson: {\n                name: 'Leonid',\n              },\n              children: [{\n                firstPerson: {\n                  name: 'Rim',\n                },\n                secondPerson: {\n                  name: 'Natasha',\n                },\n              }],\n            }, {\n              firstPerson: {\n                name: 'Leonid',\n              },\n            }],\n          },\n          {\n            firstPerson: {\n              name: 'Olga',\n            },\n            secondPerson: {\n              name: 'Nikita',\n            },\n          }],\n        },\n        {\n          firstPerson: {\n            name: 'Vitia',\n          },\n          secondPerson: {\n            name: 'Dasha',\n          },\n        },\n        {\n          firstPerson: {\n            name: 'Antonio Wild',\n            image: 'https://picsum.photos/300/300?random=3',\n          },\n          secondPerson: {\n            name: 'Olivia Olson',\n          },\n          children: [{\n            firstPerson: {\n              name: 'Kristina Wild',\n            },\n          },\n          {\n            firstPerson: {\n              name: 'Alexey Wild',\n            },\n          },\n          {\n            firstPerson: {\n              name: 'Viktor Wild',\n              id: 22,\n            },\n          }],\n        }],\n      }],\n    };\n  },\n  methods: {\n    cardClick(item) {\n      console.log(item);\n    },\n    getUser() { // 获取userlist\n      this.loading = true;\n      axios.post('/api/query-user', { group_id: this.$props.info.id })\n        .then((res) => {\n          this.loading = false;\n          if (res.data.status) {\n            this.$data.userlist = res.data.user_list;\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    // 添加成员\n    addMember(item, type) {\n      console.log(item);\n      this.test(this.tree, item.id); // 返回选中节点和层的信息\n      if (type === 'Sibling') {\n        console.log('addSibling');\n        // eslint-disable-next-line no-restricted-syntax\n        const ele = { firstPerson: { name: '未定义', id: this.testnum, image: 's' } };\n        this.testnum += 1;\n        this.currentchildren.push(ele);\n        console.log(this.tree);\n      } else if (type === 'Children') {\n        const ele = { firstPerson: { name: '未定义', id: this.testnum, image: 's' } };\n        this.testnum += 1;\n        if (this.currentnode.children !== undefined) {\n          this.currentnode.children.push(ele);\n        } else {\n          // eslint-disable-next-line no-param-reassign\n          this.currentnode.children = [];\n          this.currentnode.children.push(ele);\n        }\n        console.log('addChildren');\n      } else if (type === 'Honey') {\n        const ele = { name: '未定义', id: this.testnum, image: 's' };\n        if (this.currentnode.firstPerson !== undefined && this.currentnode.secondPerson === undefined) { // 说明只有左节点\n          this.currentnode.secondPerson = ele;\n          this.testnum += 1;\n        } else if (this.currentnode.firstPerson === undefined && this.currentnode.secondPerson !== undefined) { // 说明只有右节点\n          this.currentnode.firstPerson = ele;\n          this.testnum += 1;\n        } else { // 说明两个节点都有\n          this.$message({\n            type: 'warning',\n            message: '无法添加配偶',\n          });\n        }\n        console.log('addHoney');\n      } else {\n        console.log('Error');\n      }\n    },\n    // 递归遍历所有节点，根据id找到对应的children数组和节点\n    test(tree, id) {\n      let e;\n      this.temptree = tree;\n      // eslint-disable-next-line guard-for-in,no-restricted-syntax\n      for (e of this.temptree) {\n        if (e.firstPerson !== undefined && e.firstPerson.id === id) {\n          console.log(e.firstPerson);\n          this.currentnode = e;// 当前节点，字典类型\n          this.currentchildren = this.temptree; // 当前层，数组类型\n          console.log(this.currentchildren);\n        }\n        if (e.secondPerson !== undefined && e.secondPerson.id === id) {\n          this.currentnode = e; // 当前节点，字典类型\n          console.log(e.secondPerson);\n          this.currentchildren = this.temptree; // 当前层，数组类型\n          console.log(this.currentchildren);\n        }\n        if (e.children !== undefined) { // 若它不是叶子结点\n          this.test(e.children, id); // 递归至下一个孩子层\n        }\n      }\n    },\n  },\n  created() {\n    this.getUser();\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin-top: 30px;\n}\n.text-center {\n  text-align: center;\n  margin-bottom: 16px;\n}\n.custom-card {\n  display: flex;\n  align-items: center;\n  width: 110px;\n  padding: 5px;\n  border: 0.5px solid #ddd;\n  border-radius: 5px;\n  box-sizing: border-box;\n  background-color: #fff;\n  cursor: pointer;\n  box-shadow: 0 0 3px 1px rgba(#000, 0);\n  transition: box-shadow .2s ease;\n  &:hover {\n    box-shadow: 0 0 3px 1px rgba(#000, .1);\n  }\n  &__image {\n    flex: 0 0 auto;\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    background-color: #dedede;\n    background-size: cover;\n    background-position: 50%;\n  }\n  &__info {\n    padding-left: 8px;\n  }\n  &__name {\n    font-weight: 300;\n  }\n  &__age {\n    margin-top: 2px;\n    font-size: 6px;\n  }\n}\n</style>\n\n<!--<style lang=\"scss\" scoped>-->\n<!--#app {-->\n<!--  font-family: Avenir, Helvetica, Arial, sans-serif;-->\n<!--  -webkit-font-smoothing: antialiased;-->\n<!--  -moz-osx-font-smoothing: grayscale;-->\n<!--  color: #2c3e50;-->\n<!--  margin-top: 60px;-->\n<!--}-->\n<!--.text-center {-->\n<!--  text-align: center;-->\n<!--  margin-bottom: 32px;-->\n<!--}-->\n<!--.custom-card {-->\n<!--  display: flex;-->\n<!--  align-items: center;-->\n<!--  width: 220px;-->\n<!--  padding: 10px;-->\n<!--  border: 1px solid #ddd;-->\n<!--  border-radius: 10px;-->\n<!--  box-sizing: border-box;-->\n<!--  background-color: #fff;-->\n<!--  cursor: pointer;-->\n<!--  box-shadow: 0 0 6px 2px rgba(#000, 0);-->\n<!--  transition: box-shadow .2s ease;-->\n<!--  &:hover {-->\n<!--    box-shadow: 0 0 6px 2px rgba(#000, .1);-->\n<!--  }-->\n<!--  &__image {-->\n<!--    flex: 0 0 auto;-->\n<!--    width: 60px;-->\n<!--    height: 60px;-->\n<!--    border-radius: 50%;-->\n<!--    background-color: #dedede;-->\n<!--    background-size: cover;-->\n<!--    background-position: 50%;-->\n<!--  }-->\n<!--  &__info {-->\n<!--    padding-left: 16px;-->\n<!--  }-->\n<!--  &__name {-->\n<!--    font-weight: 600;-->\n<!--  }-->\n<!--  &__age {-->\n<!--    margin-top: 4px;-->\n<!--    font-size: 12px;-->\n<!--  }-->\n<!--}-->\n<!--</style>-->\n"]}]}