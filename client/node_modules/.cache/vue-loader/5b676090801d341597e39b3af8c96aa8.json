{"remainingRequest":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\src\\components\\ViewPhoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\src\\components\\ViewPhoto.vue","mtime":1640174829848},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640165327016},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1640165324120},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640165327016},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1640165341316}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1ZpZXdQaG90bycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbW1lbnQ6ICcnLAogICAgICBpbWFnZWxpc3Q6IFtdLAogICAgICBzcmNMaXN0OiBbXSwKICAgICAgcGljRGF0YToge30sCiAgICAgIGNvbW1lbnRMaXN0OiB7fSwKICAgICAgbGlrZXM6ICcnLAogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBpbmZvOiB7fSwKICB9LAogIG1ldGhvZHM6CiAgICAgIHsKICAgICAgICBCYWNrVG9JbWFnZVdhbGwoKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdCYWNrdG9JbWFnZVdhbGwnKTsKICAgICAgICB9LAogICAgICAgIGxpa2UoKSB7CiAgICAgICAgICBheGlvcy5wb3N0KCcvYXBpL3F1ZXJ5LWxpa2UnLCB7IHBvc3RfaWQ6IHRoaXMuJHByb3BzLmluZm8ucG9zdF9pZCwgdXNlcl9pZDogdGhpcy4kcm91dGUucGFyYW1zLnVzZXJpZCB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykgewogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5saWtlZCkgewogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgnL2FwaS9jYW5jZWwtbGlrZScsIHsgcG9zdF9pZDogdGhpcy4kcHJvcHMuaW5mby5wb3N0X2lkLCB1c2VyX2lkOiB0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcmlkIH0pLnRoZW4oKHJlczIpID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKHJlczIuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkvaDlt7LngrnotZ7mraTluJbvvIzlj5bmtojngrnotZ4nLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UG9zdCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycjIpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIyKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoJy9hcGkvbGlrZS1wb3N0JywgeyBwb3N0X2lkOiB0aGlzLiRwcm9wcy5pbmZvLnBvc3RfaWQsIHVzZXJfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy51c2VyaWQgfSkudGhlbigocmVzMikgPT4gewogICAgICAgICAgICAgICAgICBpZiAocmVzMi5kYXRhLnN0YXR1cykgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMaWtlZCcpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKn+eCuei1nicsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRQb3N0KCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIyKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycjIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGdldFBvc3QoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0UG9zdCcpOwogICAgICAgICAgdGhpcy5saWtlcyA9IHRoaXMuaW5mby5saWtlOwogICAgICAgICAgLy8gYXhpb3MucG9zdCgnL2FwaS9xdWVyeS1hbGwtcG9zdCcsIHsgZ3JvdXBfaWQ6IHRoaXMuJHByb3BzLmluZm8uaWQgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAvLyAgIGxldCBwb3N0cyA9IFtdOwogICAgICAgICAgLy8gICBpZiAocmVzLmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAvLyAgICAgcG9zdHMgPSByZXMuZGF0YS5wb3N0X2xpc3Q7CiAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocG9zdHMpOwogICAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zdHMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgIC8vICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgLy8gICAgICAgY29uc3Qgc3JjID0gJy9hcGkvc2hvdy8nICsgdGhpcy4kcHJvcHMuaW5mby5pZCArICcvJyArIHBvc3RzW2ldLm1lZGlhOwogICAgICAgICAgLy8gICAgICAgY29uc3QgdG1wID0ge307CiAgICAgICAgICAvLyAgICAgICB0bXAuc3JjID0gc3JjOwogICAgICAgICAgLy8gICAgICAgdG1wLnBvc3RfaWQgPSBwb3N0c1tpXS5pZDsKICAgICAgICAgIC8vICAgICAgIHRtcC5jYXB0aW9uID0gcG9zdHNbaV0uY2FwdGlvbjsKICAgICAgICAgIC8vICAgICAgIHRtcC5kYXRlX2NyZWF0ZWQgPSBwb3N0c1tpXS5kYXRlX2NyZWF0ZWQ7CiAgICAgICAgICAvLyAgICAgICB0bXAubGlrZSA9IHBvc3RzW2ldLmxpa2U7CiAgICAgICAgICAvLyAgICAgICB0bXAudXNlcl9pZCA9IHBvc3RzW2ldLnVzZXJfaWQ7CiAgICAgICAgICAvLyAgICAgICB0bXAudXNlcm5hbWUgPSBwb3N0c1tpXS51c2VybmFtZTsKICAgICAgICAgIC8vICAgICAgIHRoaXMuaW1hZ2VsaXN0LnB1c2godG1wKTsKICAgICAgICAgIC8vICAgICAgIHRoaXMuc3JjTGlzdC5wdXNoKHNyYyk7CiAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHRoaXMuaW1hZ2VsaXN0KTsKICAgICAgICAgIC8vICAgICB0aGlzLmZ1bGxzY3JlZW5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAvLyAgIH0KICAgICAgICAgIC8vIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIC8vICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIC8vIH0pOwogICAgICAgICAgYXhpb3MucG9zdCgnL2FwaS9xdWVyeS1jb21tZW50JywgeyBwb3N0X2lkOiB0aGlzLmluZm8ucG9zdF9pZCB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgbGV0IGNvbW1lbnRzID0gW107CiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICBjb21tZW50cyA9IHJlcy5kYXRhLmNvbW1lbnRzX2xpc3Q7CiAgICAgICAgICAgICAgdGhpcy5jb21tZW50TGlzdCA9IGNvbW1lbnRzOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjb21tZW50cycpOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNvbW1lbnRzKTsKICAgICAgICAgICAgICB0aGlzLmNvbW1lbnQgPSAnJzsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRwcm9wcy5pbmZvLmxpa2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGFkZENvbW1lbnQoKSB7CiAgICAgICAgICBheGlvcy5wb3N0KCcvYXBpL2FkZC1jb21tZW50JywgeyBwb3N0X2lkOiB0aGlzLmluZm8ucG9zdF9pZCwgdXNlcl9pZDogdGhpcy4kcm91dGUucGFyYW1zLnVzZXJpZCwgY29udGVudDogdGhpcy5jb21tZW50IH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbW1lbnQgcG9zdGVkJyk7CiAgICAgICAgICAgICAgdGhpcy5nZXRQb3N0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzIScpOwogICAgLy8gdGhpcy5kYXRhID0gdGhpcy5pbmZvOwogICAgdGhpcy5nZXRQb3N0KCk7CiAgfSwKfTsK"},{"version":3,"sources":["ViewPhoto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ViewPhoto.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-container style=\"margin-top: -7px\">\n  <div>\n    <el-container style=\"margin-bottom: 4px\">\n    <el-button\n      style=\"margin-bottom: 10px\" size=\"medium\"\n      icon=\"el-icon-back\"\n      @click=\"BackToImageWall\"\n    type=\"primary\">回到照片墙</el-button>\n    </el-container>\n    <el-container>\n <el-aside width=\"1090px\">\n   <el-card :body-style=\"{ padding: '10px' }\" shadow=\"hover\">\n     <el-image\n      :src=\"info.src\"\n      :preview-src-list=\"[info.src]\">\n    </el-image>\n\n   </el-card>\n </el-aside>\n      <el-container>\n\n      <el-main>\n        <div>\n          <el-card >\n            <el-container>\n         <el-avatar src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\"\n                 style=\"\"  :size=\"50\"></el-avatar>\n        <h3 style=\"margin-top: 12px;margin-left: 5px\">\n          {{info.username}}\n        </h3>\n\n            </el-container>\n        <span style=\"margin-left: 5px\">{{info.date_created}}</span>\n            <el-row>\n              <h2 style=\"margin-top: 12px;margin-left: 5px\">{{this.$props.info.caption}}</h2>\n            </el-row>\n\n    <el-row :gutter=\"20\">\n            <el-table\n      :data=\"commentList\"\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"username\"\n        label=\"Username\"\n        width=\"100\">\n      </el-table-column>\n      <el-table-column\n        prop=\"content\"\n        label=\"Comments\"\n        width=\"400\">\n      </el-table-column>\n    </el-table></el-row>\n            <el-row :gutter=\"20\">\n            <el-input placeholder=\"写个评论吧！\" v-model=\"comment\"></el-input></el-row>\n            <div>\n            <el-button type=\"primary\" icon=\"el-icon-edit\" @click=\"addComment\" style=\"padding: 10px 10px;\">Comment</el-button>\n             <el-button type=\"success\"\n                size=\"default\"\n                icon=\"el-icon-arrow-up\"\n                style=\"padding: 10px 10px;\"\n                @click=\"like()\"\n              >Like  {{this.likes}}</el-button></div>\n           </el-card>\n        </div>\n      </el-main>\n\n    </el-container>\n</el-container>\n  </div>\n  </el-container>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'ViewPhoto',\n  data() {\n    return {\n      comment: '',\n      imagelist: [],\n      srcList: [],\n      picData: {},\n      commentList: {},\n      likes: '',\n    };\n  },\n  props: {\n    info: {},\n  },\n  methods:\n      {\n        BackToImageWall() {\n          this.$emit('BacktoImageWall');\n        },\n        like() {\n          axios.post('/api/query-like', { post_id: this.$props.info.post_id, user_id: this.$route.params.userid }).then((res) => {\n            if (res.data.status) {\n              if (res.data.liked) {\n                axios.post('/api/cancel-like', { post_id: this.$props.info.post_id, user_id: this.$route.params.userid }).then((res2) => {\n                  if (res2.data.status) {\n                    this.$message({\n                      type: 'warning',\n                      message: '你已点赞此帖，取消点赞',\n                    });\n                    this.getPost();\n                  }\n                })\n                  .catch((err2) => {\n                    console.log(err2);\n                  });\n              } else {\n                axios.post('/api/like-post', { post_id: this.$props.info.post_id, user_id: this.$route.params.userid }).then((res2) => {\n                  if (res2.data.status) {\n                    console.log('Liked');\n                    this.$message({\n                      type: 'success',\n                      message: '成功点赞',\n                    });\n                    this.getPost();\n                  }\n                }).catch((err2) => {\n                  console.log(err2);\n                });\n              }\n            }\n          }).catch((err) => {\n            console.log(err);\n          });\n        },\n        getPost() {\n          console.log('getPost');\n          this.likes = this.info.like;\n          // axios.post('/api/query-all-post', { group_id: this.$props.info.id }).then((res) => {\n          //   let posts = [];\n          //   if (res.data.status) {\n          //     posts = res.data.post_list;\n          //     console.log(posts);\n          //     for (let i = 0; i < posts.length; i += 1) {\n          //       // eslint-disable-next-line\n          //       const src = '/api/show/' + this.$props.info.id + '/' + posts[i].media;\n          //       const tmp = {};\n          //       tmp.src = src;\n          //       tmp.post_id = posts[i].id;\n          //       tmp.caption = posts[i].caption;\n          //       tmp.date_created = posts[i].date_created;\n          //       tmp.like = posts[i].like;\n          //       tmp.user_id = posts[i].user_id;\n          //       tmp.username = posts[i].username;\n          //       this.imagelist.push(tmp);\n          //       this.srcList.push(src);\n          //     }\n          //     console.log(this.imagelist);\n          //     this.fullscreenLoading = false;\n          //   }\n          // }).catch((err) => {\n          //   console.log(err);\n          // });\n          axios.post('/api/query-comment', { post_id: this.info.post_id }).then((res) => {\n            let comments = [];\n            if (res.data.status) {\n              comments = res.data.comments_list;\n              this.commentList = comments;\n              // console.log('comments');\n              // console.log(comments);\n              this.comment = '';\n              // console.log(this.$props.info.like);\n            }\n          });\n        },\n        addComment() {\n          axios.post('/api/add-comment', { post_id: this.info.post_id, user_id: this.$route.params.userid, content: this.comment }).then((res) => {\n            if (res.data.status) {\n              console.log('Comment posted');\n              this.getPost();\n            }\n          }).catch((err) => {\n            console.log(err);\n          });\n        },\n      },\n  created() {\n    console.log('success!');\n    // this.data = this.info;\n    this.getPost();\n  },\n};\n</script>\n\n<style scoped>\n  .el-image {\n    width: 100%;\n    object-fit: scale-down;\n  }\n  .el-row {\n    margin-bottom: 20px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n</style>\n"]}]}