{"remainingRequest":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\src\\components\\GroupPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\src\\components\\GroupPage.vue","mtime":1639669343752},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Laggy pc\\Documents\\GitHub\\SoftwareEngineeringB11\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBNZW1iZXJMaXN0IGZyb20gJy4vTWVtYmVyTGlzdC52dWUnOwppbXBvcnQgR2VuZWFsb2d5UGFnZSBmcm9tICcuL0dlbmVhbG9neVBhZ2UudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnR3JvdXBQYWdlJywKICBjb21wb25lbnRzOiB7IEdlbmVhbG9neVBhZ2UsIE1lbWJlckxpc3QgfSwKICBDb21wb25lbnQ6IHsKICAgIE1lbWJlckxpc3QsCiAgICBHZW5lYWxvZ3lQYWdlLAogIH0sCiAgcHJvcHM6IHsKICAgIGluZm86IHt9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJpZDogJycsCiAgICAgIGludml0ZWtleTogeyBudW06ICcnLCBleF9kYXRlOiAnJyB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoZWNrQWRtaW4oKSB7CiAgICAgIGF4aW9zLnBvc3QoJy9hcGkvcXVlcnktYWRtaW4nLCB7IGdyb3VwX2lkOiB0aGlzLiRwcm9wcy5pbmZvLmlkLCB1c2VyX2lkOiB0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcmlkIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykgewogICAgICAgICAgICB0aGlzLiRwcm9wcy5pbmZvLmFkbWluID0gcmVzLmRhdGEuYWRtaW47CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHByb3BzLmluZm8uYWRtaW4pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogICAgRGVsZXRlR3JvdXAoKSB7CiAgICAgIGF4aW9zLnBvc3QoJy9hcGkvZGVsZXRlLWdyb3VwJywgeyBncm91cF9pZDogdGhpcy4kcHJvcHMuaW5mby5pZCB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnQmFja3RvR3JvdXBMaXN0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBCYWNrVG9Hcm91cExpc3QoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ0JhY2t0b0dyb3VwTGlzdCcpOwogICAgfSwKICAgIGdldEludml0ZUtleSgpIHsKICAgICAgYXhpb3MucG9zdCgnL2FwaS9nZW5lcmF0ZS1rZXknLCB7IGdyb3VwX2lkOiB0aGlzLiRwcm9wcy5pbmZvLmlkIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykgewogICAgICAgICAgICB0aGlzLmludml0ZWtleS5udW0gPSByZXMuZGF0YS5pbnZpdGVfa2V5OwogICAgICAgICAgICB0aGlzLmludml0ZWtleS5leF9kYXRlID0gcmVzLmRhdGEua2V5X2V4cGlyeV9kYXRlOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmludml0ZWtleSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBsZWF2ZUdyb3VwKCkgewogICAgICBheGlvcy5wb3N0KCcvYXBpL2xlYXZlLWdyb3VwJywgewogICAgICAgIGdyb3VwX2lkOiB0aGlzLiRwcm9wcy5pbmZvLmlkLAogICAgICAgIHVzZXJfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy51c2VyaWQsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgIHRoaXMuQmFja1RvR3JvdXBMaXN0KCk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn5oiQ5Yqf6YCA5Ye6576k57uEJywKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+aXoOazlemAgOe+pCcsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuY2hlY2tBZG1pbigpOwogICAgY29uc29sZS5sb2codGhpcy4kcHJvcHMuaW5mbyk7CiAgfSwKfTsK"},{"version":3,"sources":["GroupPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GroupPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-container>\n  <el-header>\n    <el-container>\n    <el-button\n      style=\"width: 50px;margin-right: 30px;\"\n      icon=\"el-icon-back\"\n      @click=\"BackToGroupList\" circle></el-button>\n    <h1>{{this.$props.info.group_name}}\n    <el-button  @click=\"getInviteKey\">获取邀请码</el-button>\n      <el-button  @click=\"leaveGroup\">退出群</el-button>\n    </h1>\n\n    </el-container>\n  </el-header>\n  <el-container>\n    <el-aside width=\"300px\">\n      <MemberList :info=\"this.$props.info\"></MemberList>\n    </el-aside>\n    <el-main>\n      <GenealogyPage></GenealogyPage>\n    </el-main>\n  </el-container>\n    <el-footer >\n       <el-button style=\"position: absolute; bottom: 10px; right: 10px;\" v-if=\"this.$props.info.admin\" type=\"danger\" icon=\"el-icon-delete\"  @click=\"DeleteGroup\">删除群</el-button>\n    </el-footer>\n</el-container>\n</template>\n\n<script>\nimport axios from 'axios';\nimport MemberList from './MemberList.vue';\nimport GenealogyPage from './GenealogyPage.vue';\n\nexport default {\n  name: 'GroupPage',\n  components: { GenealogyPage, MemberList },\n  Component: {\n    MemberList,\n    GenealogyPage,\n  },\n  props: {\n    info: {},\n  },\n  data() {\n    return {\n      userid: '',\n      invitekey: { num: '', ex_date: '' },\n    };\n  },\n  methods: {\n    checkAdmin() {\n      axios.post('/api/query-admin', { group_id: this.$props.info.id, user_id: this.$route.params.userid })\n        .then((res) => {\n          if (res.data.status) {\n            this.$props.info.admin = res.data.admin;\n            console.log(this.$props.info.admin);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    DeleteGroup() {\n      axios.post('/api/delete-group', { group_id: this.$props.info.id })\n        .then((res) => {\n          if (res.data.status) {\n            this.$emit('BacktoGroupList');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    BackToGroupList() {\n      this.$emit('BacktoGroupList');\n    },\n    getInviteKey() {\n      axios.post('/api/generate-key', { group_id: this.$props.info.id })\n        .then((res) => {\n          if (res.data.status) {\n            this.invitekey.num = res.data.invite_key;\n            this.invitekey.ex_date = res.data.key_expiry_date;\n            console.log(this.invitekey);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    leaveGroup() {\n      axios.post('/api/leave-group', {\n        group_id: this.$props.info.id,\n        user_id: this.$route.params.userid,\n      })\n        .then((res) => {\n          // eslint-disable-next-line no-empty\n          if (res.data.status) {\n            this.BackToGroupList();\n            this.$message({\n              type: 'success',\n              message: '成功退出群组',\n            });\n          } else {\n            this.$message({\n              type: 'warning',\n              message: '无法退群',\n            });\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  created() {\n    this.checkAdmin();\n    console.log(this.$props.info);\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n"]}]}